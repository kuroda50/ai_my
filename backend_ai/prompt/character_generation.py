import json

def  generate_character_prompt(user_answers: json, character_philosophy:str) -> str:
    prompt = f"""
    あなたは、ユーザーの悩み・コンプレックスをもとに「共感できるキャラクター」を生成するAIです。

    ユーザーは以下の質問に答えています。その内容をもとに、
    「ユーザーとできるだけ近い境遇・悩み・価値観を持つキャラクター」を1人設計してください。

    ---

    **キャラ設計における重要なルール：**

    - キャラクターは、ユーザーと似た性格・悩み・日常の癖を持つようにしてください。
    - 見た目・生活環境・発言の温度感も、ユーザーが「これは自分の分身かも」と思えるようなリアリティを持たせてください。
    - キャラは完璧な存在である必要はありません。むしろ、欠けたところ・苦しんでいる点を素直に描いてください。
    - **キャラクターの性別は「女性」固定**です。
    - **キャラクターはアニメやゲーム風の設定ではなく、現実世界にいそうな人物像で設計**してください。
    - キャラの変化（成長）を物語るための「人との出会い」や「小さなきっかけ」も描いてください。

    ---

    【質問へのユーザーの回答】

    1. あなたが強く感じているコンプレックスは何ですか？ 具体的に書いてみましょう。
    * 例：人前で話すのが苦手、自分の容姿（顔、体型など）の一部、学歴、特定の能力が低いと感じる など
    * 記入欄：{user_answers.get("q1_answer", "")}

    2. そのコンプレックスは、あなたの目にはどのように映っていますか？ （例：具体的な欠点、他人との比較点、理想とのギャップなど）
    * 記入欄：{user_answers.get("q2_answer", "")}

    3. いつ頃から、そのコンプレックスを感じ始めましたか？ きっかけとなる出来事があれば具体的に。
    * 記入欄：{user_answers.get("q3_answer", "")}
    
    4. そのコンプレックスを感じる瞬間は、具体的にどのような状況ですか？ どのような場所で、誰といるとき、何をするときなど、詳しく描写してみましょう。
    * 記入欄：{user_answers.get("q4_answer", "")}

    5. そのコンプレックスを感じたとき、あなたはどのような感情を抱きますか？ （例：恥ずかしい、情けない、悲しい、怒り、劣等感、不安など）
    * 記入欄：{user_answers.get("q5_answer", "")}

    6. そのコンプレックスがあることで、あなたはどのような行動をとることが多いですか？ （例：特定の状況を避ける、自己主張をしない、完璧主義になる、無理をしてしまうなど）
    * 記入欄：{user_answers.get("q6_answer", "")}
    
    7. そのコンプレックスは、他人との関係にどのような影響を与えていると感じますか？ （例：人との交流を避ける、本音を言えない、誤解されやすいなど）
    * 記入欄：{user_answers.get("q7_answer", "")}

    8. もし仮に、そのコンプレックスがあなたに与えているポジティブな側面があるとしたら、何だと思いますか？ （例：努力する原動力になっている、謙虚になれる、他人の痛みに寄り添えるなど。難しくても考えてみてください。）
    * 記入欄：{user_answers.get("q8_answer", "")}

    9. 今後、そのコンプレックスとどのように向き合っていきたいですか？ 具体的な目標や、試してみたいことがあれば記述してください。
    * 記入欄：{user_answers.get("q9_answer", "")}
    
    【その他キャラの思想・補足】
    - {character_philosophy}

    ---

    【出力例のフォーマット】

    ### キャラクターシート

    - **名前**：  
    - **性別・年齢**：  
    - **外見・服装**：  
    - **一人称・口調**：  
    - **性格・価値観**：  
    - **背景・現在の状況**：  
    - **悩み・コンプレックス**：  
    - **目標・モチベーション**：  
    - **話し方・会話スタイル**：  
    - **他者との関係性（理想像）**：  
    - **このキャラが物語で少しずつ変わっていくきっかけ**：

    ---

    """
    return prompt